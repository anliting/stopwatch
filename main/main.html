<!doctype html>
<html>
<head>
<meta charset=utf-8>
<title>Stopwatch</title>
</head>
<body>
<div style="margin:0px auto;max-width:61%">
    <div id="div_clock" style="font-size:400%">
    </div>
    <div>
        <p>
            Space: Go or pause.
        <p>
            R: Reset.
    </div>
</div>
<script type=module>
let
    isRunning=0,
    startTime,
    stopTime
onkeydown=e=>{
    if(e.keyCode===32){ // space
        if(!isRunning){
            if(!startTime)
                startTime=performance.now()
            else
                startTime=performance.now()-(stopTime-startTime)
            isRunning=1
            return
        }
        isRunning=false
        stopTime=performance.now()
    }
    if(e.keyCode===82){ // r
        isRunning=false
        startTime=undefined
    }
}
updateClock()
function updateClock(){
    setTimeout(updateClock,32)
    if(!startTime){
        document.getElementById('div_clock').textContent=
            '00:00:00.000'
        return
    }
    if(!isRunning)
        return
    document.getElementById('div_clock').textContent=
        msToString(~~(performance.now()-startTime))
}
function msToString(t){
    let output=paddingZerosTo(t%1000,3)
    t=~~(t/1000)
    output=paddingZerosTo(t%60,2)+'.'+output
    t=~~(t/60)
    output=paddingZerosTo(t%60,2)+':'+output
    t=~~(t/60)
    output=paddingZerosTo(t%24,2)+':'+output
    t=~~(t/24)
    return output
    function paddingZerosTo(m,n){
        m=''+m
        while(m.length<n)
            m='0'+m
        return m
    }
}
</script>
</body>
</html>
